<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç API Features</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .result { background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 5px; }
        .error { background: #ffe6e6; color: red; }
        .success { background: #e6ffe6; color: green; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç API –¥–ª—è Features</h1>
    <p>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–º–æ–∂–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —Å–ª–æ—Ç–∞.</p>

    <button onclick="testFeaturesAPI()">üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API Features</button>
    <button onclick="testBonusesAPI()">üéÅ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API Bonuses</button>
    <button onclick="testMechanicsAPI()">‚öôÔ∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API Mechanics</button>

    <div id="results"></div>

    <script>
        const API_BASE = 'http://localhost:3001';

        function addResult(message, isError = false) {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `result ${isError ? 'error' : 'success'}`;
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
            results.appendChild(div);
        }

        async function testFeaturesAPI() {
            addResult('üîç –¢–µ—Å—Ç–∏—Ä—É–µ–º API Features...');
            try {
                const response = await fetch(`${API_BASE}/api/features`);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();
                addResult(`‚úÖ Features API —Ä–∞–±–æ—Ç–∞–µ—Ç! –ü–æ–ª—É—á–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π: ${Array.isArray(data) ? data.length : data.data ? data.data.length : '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}`);

                if (data && (data.length > 0 || (data.data && data.data.length > 0))) {
                    const features = data.data || data;
                    addResult(`üìä –ü—Ä–∏–º–µ—Ä—ã features: ${features.slice(0, 3).map(f => f.name || f.title).join(', ')}`);
                } else {
                    addResult('‚ö†Ô∏è API —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç. –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å features –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.', true);
                }

            } catch (error) {
                addResult(`‚ùå –û—à–∏–±–∫–∞ Features API: ${error.message}`, true);
            }
        }

        async function testBonusesAPI() {
            addResult('üîç –¢–µ—Å—Ç–∏—Ä—É–µ–º API Bonuses...');
            try {
                const response = await fetch(`${API_BASE}/api/bonuses`);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();
                addResult(`‚úÖ Bonuses API —Ä–∞–±–æ—Ç–∞–µ—Ç! –ü–æ–ª—É—á–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π: ${Array.isArray(data) ? data.length : data.data ? data.data.length : '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}`);

            } catch (error) {
                addResult(`‚ùå –û—à–∏–±–∫–∞ Bonuses API: ${error.message}`, true);
            }
        }

        async function testMechanicsAPI() {
            addResult('üîç –¢–µ—Å—Ç–∏—Ä—É–µ–º API Mechanics...');
            try {
                const response = await fetch(`${API_BASE}/api/mechanics`);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();
                addResult(`‚úÖ Mechanics API —Ä–∞–±–æ—Ç–∞–µ—Ç! –ü–æ–ª—É—á–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π: ${Array.isArray(data) ? data.length : data.data ? data.data.length : '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}`);

            } catch (error) {
                addResult(`‚ùå –û—à–∏–±–∫–∞ Mechanics API: ${error.message}`, true);
            }
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            addResult('üèÅ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API.');
        }
    </script>
</body>
</html>
