
<template>
  <div
    class="min-h-screen bg-zinc-950"
  >
    <!-- üì± –ù–∞–≤–∏–≥–∞—Ü–∏—è - –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º —Å—Ç–µ–∫–ª–∞ -->
    <nav
      class="bg-white/5 backdrop-blur-xl border-b border-white/10 sticky top-0 z-50 shadow-lg shadow-black/20"
    >
      <div class="container mx-auto px-3 sm:px-4 py-3 sm:py-4">
        <div class="flex items-center justify-between gap-2">
          <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ - –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è –Ω–∞ mobile -->
          <NuxtLink
            to="/slots"
            class="inline-flex items-center text-blue-400 hover:text-blue-300 transition-colors font-medium text-sm sm:text-base min-w-0"
          >
            <svg
              class="w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2 flex-shrink-0"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 19l-7-7 7-7"
              ></path>
            </svg>
            <span class="hidden xs:inline">Back to </span>Slots<span class="hidden sm:inline"> Catalog</span>
          </NuxtLink>

          <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–∞—Ö –∏ –≤—ã—à–µ -->
          <div class="hidden md:flex items-center text-xs sm:text-sm text-white/50 truncate">
            <NuxtLink to="/" class="hover:text-blue-400 transition-colors whitespace-nowrap"
              >Home</NuxtLink
            >
            <span class="mx-1 sm:mx-2">/</span>
            <NuxtLink to="/slots" class="hover:text-blue-400 transition-colors whitespace-nowrap"
              >Slots</NuxtLink
            >
            <span class="mx-1 sm:mx-2">/</span>
            <span class="text-white font-medium truncate max-w-[120px] lg:max-w-[200px]" v-if="slot">{{
              slot.name || 'Slot'
            }}</span>
          </div>

          <!-- –ú–æ–±–∏–ª—å–Ω—ã–µ —Ö–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ - —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–ª–æ—Ç–∞ -->
          <div class="md:hidden text-xs text-white/70 truncate max-w-[140px] sm:max-w-[200px]" v-if="slot">
            {{ slot.name || 'Slot' }}
          </div>
        </div>
      </div>
    </nav>

    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
    <!-- üíÄ Skeleton Loading -->
    <div v-if="loading" class="min-h-screen bg-zinc-950 pt-24 pb-12 px-4 sm:px-6 lg:px-8">
      <div class="container mx-auto">
        <div class="flex flex-col lg:flex-row gap-8 animate-pulse">
          <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ (–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç) -->
          <div class="w-full lg:w-[70%] space-y-8">

            <!-- Mobile Layout (Visible only on mobile) -->
            <div class="lg:hidden space-y-6">
               <div class="h-8 w-3/4 bg-white/5 rounded-lg"></div>
               <div class="h-6 w-1/2 bg-white/5 rounded-full"></div>
               <div class="space-y-2">
                 <div class="h-4 w-full bg-white/5 rounded"></div>
                 <div class="h-4 w-full bg-white/5 rounded"></div>
                 <div class="h-4 w-2/3 bg-white/5 rounded"></div>
               </div>
               <div class="grid grid-cols-2 gap-3 mt-4">
                 <div class="h-10 bg-white/5 rounded-lg"></div>
                 <div class="h-10 bg-white/5 rounded-lg"></div>
                 <div class="h-10 bg-white/5 rounded-lg"></div>
                 <div class="h-10 bg-white/5 rounded-lg"></div>
               </div>
               <div class="h-12 w-full bg-white/5 rounded-xl mt-4"></div>
            </div>

            <!-- Desktop Layout (Visible only on desktop) -->
            <div class="hidden lg:flex gap-8 items-start">
               <!-- Portrait Image Column (2/5) -->
               <div class="w-2/5 aspect-[3/4] bg-white/5 rounded-2xl border border-white/5"></div>

               <!-- Content Column (3/5) -->
               <div class="flex-1 space-y-6">
                 <div class="h-8 w-1/3 bg-white/5 rounded-full"></div>
                 <div class="h-12 w-3/4 bg-white/5 rounded-xl"></div>
                 <div class="space-y-3">
                   <div class="h-4 w-full bg-white/5 rounded"></div>
                   <div class="h-4 w-full bg-white/5 rounded"></div>
                   <div class="h-4 w-5/6 bg-white/5 rounded"></div>
                 </div>
                 <div class="flex gap-4 pt-4">
                   <div class="h-14 w-40 bg-white/5 rounded-xl"></div>
                   <div class="h-14 w-40 bg-white/5 rounded-xl"></div>
                 </div>
               </div>
            </div>

             <!-- Bottom Content (Common) -->
             <div class="hidden lg:grid grid-cols-2 gap-6 mt-8">
                 <div class="h-32 bg-white/5 rounded-2xl"></div>
                 <div class="h-32 bg-white/5 rounded-2xl"></div>
             </div>

          </div>

          <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ (–°–∞–π–¥–±–∞—Ä) -->
          <div class="hidden lg:block w-[30%] space-y-6">
            <div class="w-full h-80 bg-white/5 rounded-3xl border border-white/5"></div>
            <div class="w-full h-96 bg-white/5 rounded-3xl border border-white/5"></div>
          </div>
        </div>
      </div>
    </div>


    <!-- –û—à–∏–±–∫–∞ -->
    <div
      v-else-if="error"
      class="flex items-center justify-center min-h-screen"
    >
      <div class="text-center max-w-md mx-auto px-4">
        <div class="text-red-500 mb-6">
          <svg
            class="w-20 h-20 mx-auto mb-4"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"
            ></path>
          </svg>
          <h2 class="text-3xl font-bold mb-4 text-gray-800">Slot Not Found</h2>
          <p class="text-gray-600 mb-6">{{ error }}</p>
        </div>
        <NuxtLink
          to="/slots"
          class="inline-block bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-xl transition-colors font-semibold"
        >
          Go to Catalog
        </NuxtLink>
      </div>
    </div>

    <!-- üì± Hero —Å–µ–∫—Ü–∏—è -->
    <SlotHero
      :slot="slot"
      :show-rating-picker="showRatingPicker"
      :hover-stars="hoverStars"
      :selected-stars="selectedStars"
      :rating-submitting="ratingSubmitting"
      :rating-submitted="ratingSubmitted"
      @toggle-rating="toggleRatingPicker"
      @pick-rating="pickRating"
      @submit-rating="submitRating"
      @play-demo="playSlot"
      @play-real="playForReal"
      @image-error="handleSlotImageError"
      @video-error="handleSlotVideoError"
      @hover-star="setHover"
    >
      <template #after-hero>
        <!-- –ù–∞–≥—Ä–∞–¥—ã –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è (–º–æ–±–∏–ª—å–Ω—ã–µ –∏ –¥–µ—Å–∫—Ç–æ–ø) -->
        <aside
          v-if="slot.show_awards && slot.awards && slot.awards.length > 0"
          class="mt-5 lg:mt-0"
          aria-label="–ù–∞–≥—Ä–∞–¥—ã –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è"
        >
          <div class="bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-4">
            <header class="flex items-center gap-3 mb-4">
              <div class="w-10 h-10 rounded-xl bg-gradient-to-r from-amber-400 to-pink-500 shadow-lg flex items-center justify-center ring-2 ring-white/20" aria-hidden="true">
                <span class="text-white text-lg">üèÜ</span>
              </div>
              <h2 class="text-white font-extrabold text-lg tracking-wide">–ù–∞–≥—Ä–∞–¥—ã –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
            </header>

            <div class="grid grid-cols-2 gap-3" role="list">
              <div
                v-for="(award, index) in slot.awards"
                :key="index"
                :class="getAwardPublicClasses(award.color_scheme)"
                class="group relative overflow-hidden rounded-xl p-4 hover:scale-105 transition-all duration-300"
                role="listitem"
              >
                <div :class="getAwardBgClasses(award.color_scheme)" class="absolute -top-8 -right-8 w-24 h-24 rounded-full blur-2xl transition-colors" aria-hidden="true"></div>
                <div class="flex items-center gap-3 relative z-10">
                  <div :class="getAwardIconClasses(award.color_scheme)" class="w-9 h-9 rounded-lg flex items-center justify-center shadow" aria-hidden="true">
                    <span class="text-white text-base">{{ award.emoji || 'üèÜ' }}</span>
                  </div>
                  <div>
                    <div class="text-white font-bold text-sm leading-snug">{{ award.title || '–ù–∞–≥—Ä–∞–¥–∞' }}</div>
                    <div :class="getAwardTextClasses(award.color_scheme)" class="text-xs">{{ award.description || '–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã' }}</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </aside>
      </template>

      <template #right-column>
        <!-- üì± –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º–∞—è) -->
        <aside
          class="w-full lg:w-[30%] bg-white/10 backdrop-blur-md p-4 sm:p-6 md:p-8 lg:p-10 border-t lg:border-t-0 lg:border-l border-white/20 min-w-0 order-2"
          style="min-height: auto"
          aria-label="Game characteristics and additional information"
        >
          <div class="space-y-4 sm:space-y-6 md:space-y-8">
            <SlotCharacteristics :slot="slot" />
          </div>
        </aside>
      <!-- üì± Info Popup & Like Button Control Panel -->
      <div
        class="fixed bottom-4 right-4 sm:bottom-6 sm:right-6 md:bottom-8 md:right-8 z-[60] flex flex-col gap-3 print:hidden safe-area-pb"
        v-if="slot"
      >
        <!-- Info Button -->
        <button
          @click="showInfoModal = true"
          class="w-12 h-12 rounded-full bg-white/10 backdrop-blur-md border border-white/20 flex items-center justify-center text-white shadow-lg hover:bg-white/20 transition-all hover:scale-105 group animated-gradient-border"
          aria-label="Slot Information"
        >
          <span class="text-2xl group-hover:animate-pulse">‚ìò</span>
        </button>

        <!-- Like Button -->
        <button
          @click="toggleLike"
          class="w-12 h-12 rounded-full bg-white/10 backdrop-blur-md border border-white/20 flex items-center justify-center text-white shadow-lg hover:bg-white/20 transition-all hover:scale-105 group animated-gradient-border"
          :class="{ '!bg-red-500/20 !border-red-500/50': isLiked }"
          aria-label="Add to Favorites"
        >
          <span
            class="text-2xl transition-transform duration-300"
            :class="{ 'scale-125': isLiked, 'animate-[heartbeat_1s_ease-in-out_infinite]': isLiked }"
          >
            {{ isLiked ? '‚ù§Ô∏è' : 'ü§ç' }}
          </span>
        </button>
      </div>

      <!-- üìã Info Modal -->
      <div
        v-if="showInfoModal"
        class="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in"
        @click.self="showInfoModal = false"
      >
        <div
          class="relative w-full max-w-[95vw] sm:max-w-2xl bg-[#161A21] border border-[#353A4A] rounded-2xl shadow-2xl max-h-[90vh] sm:max-h-[85vh] overflow-y-auto custom-scrollbar safe-area-pb"
        >
          <!-- Header -->
          <div class="sticky top-0 z-10 flex items-center justify-between p-4 sm:p-6 bg-[#161A21]/95 backdrop-blur border-b border-[#353A4A]">
            <h2 class="text-lg sm:text-xl font-bold text-white truncate pr-2">
              <span class="text-[#8B5CF6]">#{{ slot.popularity_rank || '1' }}</span>
              {{ slot.name }}
            </h2>
            <button
              @click="showInfoModal = false"
              class="text-gray-400 hover:text-white transition-colors p-2 -mr-2"
              aria-label="Close modal"
            >
              <span class="text-2xl">‚úï</span>
            </button>
          </div>

          <!-- Content -->
          <div class="p-4 sm:p-6 space-y-6 sm:space-y-8">
            <!-- üèÜ 1. Expert Verdict -->
            <section>
              <h3 class="text-lg font-bold text-white mb-3 flex items-center gap-2">
                <span class="text-yellow-400">üèÜ</span> Expert Verdict
              </h3>
              <div class="text-gray-300 leading-relaxed text-sm sm:text-base bg-[#1F2937]/50 p-4 rounded-xl border border-[#374151]">
                <p v-if="slot.info_expert_verdict" v-html="slot.info_expert_verdict"></p>
                <p v-else>
                  {{ slot.name }} by {{ slot.providers?.name || 'the developer' }} is a {{ getVolatilityText(slot.volatility).toLowerCase() }}-volatility slot with an RTP of {{ slot.rtp || '96.0' }}% and a maximum win of {{ formatMaxWin(slot.max_win) }}x.
                  {{ slot.rtp >= 96.5 ? 'The above-average RTP makes it a solid choice for long sessions.' : 'It delivers a balanced gaming experience suitable for most players.' }}
                  Overall, we rate it {{ slot.rating || 4.5 }}/5 for its {{ slot.volatility?.toLowerCase() === 'high' ? 'thrilling high-reward potential' : 'balanced gameplay and consistent payouts' }}.
                </p>
              </div>
            </section>

            <!-- ‚úÖ‚ùå 2. Pros & Cons -->
            <section>
              <h3 class="text-lg font-bold text-white mb-3 flex items-center gap-2">
                <span>‚úÖ‚ùå</span> Pros & Cons
              </h3>
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
                <!-- Pros -->
                <div class="bg-emerald-500/5 p-3 sm:p-4 rounded-xl border border-emerald-500/20">
                  <h3 class="font-semibold text-emerald-400 text-sm mb-2">‚úÖ Pros</h3>
                  <ul class="space-y-1.5 text-gray-300 text-xs sm:text-sm">
                    <li v-for="(pro, i) in computedPros" :key="'pro-'+i" class="flex items-start gap-2">
                      <span class="text-emerald-400 mt-0.5 shrink-0">+</span>
                      <span>{{ pro }}</span>
                    </li>
                  </ul>
                </div>
                <!-- Cons -->
                <div class="bg-red-500/5 p-3 sm:p-4 rounded-xl border border-red-500/20">
                  <h3 class="font-semibold text-red-400 text-sm mb-2">‚ùå Cons</h3>
                  <ul class="space-y-1.5 text-gray-300 text-xs sm:text-sm">
                    <li v-for="(con, i) in computedCons" :key="'con-'+i" class="flex items-start gap-2">
                      <span class="text-red-400 mt-0.5 shrink-0">‚àí</span>
                      <span>{{ con }}</span>
                    </li>
                  </ul>
                </div>
              </div>
            </section>

            <!-- ‚ùì 3. FAQ (Accordion) -->
            <section>
              <h2 class="text-lg font-bold text-white mb-3 flex items-center gap-2">
                <span class="text-blue-400">‚ùì</span> Frequently Asked Questions
              </h2>
              <div class="space-y-2">
                <details
                  v-for="(item, i) in computedFaq"
                  :key="'faq-'+i"
                  class="group bg-[#1F2937]/50 rounded-xl border border-[#374151] overflow-hidden"
                >
                  <summary class="flex items-center justify-between p-3 sm:p-4 cursor-pointer text-white font-medium text-sm sm:text-base hover:bg-white/5 transition-colors select-none list-none">
                    <span>{{ item.question }}</span>
                    <span class="text-gray-400 transition-transform duration-300 group-open:rotate-180 ml-2 shrink-0">‚ñº</span>
                  </summary>
                  <div class="px-3 sm:px-4 pb-3 sm:pb-4 text-gray-300 text-xs sm:text-sm leading-relaxed border-t border-[#374151]">
                    <p class="pt-3">{{ item.answer }}</p>
                  </div>
                </details>
              </div>
            </section>

            <!-- üìù 4. Player Reviews -->
            <section>
              <h2 class="text-lg font-bold text-white mb-3 flex items-center gap-2">
                <span class="text-purple-400">üìä</span> {{ slot.name }} Review & Analysis
              </h2>
              <div class="space-y-3">
                <div
                  v-for="(review, i) in computedReviews"
                  :key="'review-'+i"
                  class="bg-[#1F2937]/50 p-3 sm:p-4 rounded-xl border border-[#374151]"
                >
                  <div class="flex items-center justify-between mb-2">
                    <div class="flex items-center gap-2">
                      <div class="w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-xs font-bold">
                        {{ review.author?.charAt(0)?.toUpperCase() || 'U' }}
                      </div>
                      <div>
                        <div class="text-white text-sm font-medium">{{ review.author }}</div>
                        <div class="text-gray-500 text-xs">{{ review.date }}</div>
                      </div>
                    </div>
                    <div class="flex text-yellow-400 text-sm">
                      <span v-for="n in 5" :key="'star-'+i+'-'+n">{{ n <= review.rating ? '‚òÖ' : '‚òÜ' }}</span>
                    </div>
                  </div>
                  <p class="text-gray-300 text-xs sm:text-sm leading-relaxed">{{ review.text }}</p>
                </div>
              </div>
            </section>

            <!-- üéÆ 5. How to Play -->
            <section>
              <h2 class="text-lg font-bold text-white mb-3 flex items-center gap-2">
                <span class="text-green-400">üéÆ</span> How to Play {{ slot.name }}
              </h2>
              <div class="space-y-3">
                <div
                  v-for="(step, i) in computedHowToPlay"
                  :key="'step-'+i"
                  class="flex items-start gap-3 sm:gap-4"
                >
                  <div class="w-8 h-8 sm:w-9 sm:h-9 rounded-full bg-gradient-to-br from-[#8B5CF6] to-[#EC4899] flex items-center justify-center text-white text-sm font-bold shrink-0">
                    {{ i + 1 }}
                  </div>
                  <div class="pt-1">
                    <h3 class="text-white font-medium text-sm sm:text-base mb-1">{{ step.step }}</h3>
                    <p class="text-gray-400 text-xs sm:text-sm leading-relaxed">{{ step.text }}</p>
                  </div>
                </div>
              </div>
            </section>

            <!-- üîó 6. Similar Slots -->
            <section v-if="similarSlots.length > 0">
              <h2 class="text-lg font-bold text-white mb-3 flex items-center gap-2">
                <span class="text-orange-400">üîó</span> Similar Slots You May Like
              </h2>
              <div class="grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3">
                <NuxtLink
                  v-for="sim in similarSlots.slice(0, 6)"
                  :key="sim.id"
                  :to="`/slots/${sim.slug}`"
                  class="bg-[#1F2937]/50 p-3 rounded-xl border border-[#374151] hover:border-[#8B5CF6]/50 transition-colors group text-center"
                  @click="showInfoModal = false"
                >
                  <div class="text-white text-xs sm:text-sm font-medium group-hover:text-[#8B5CF6] transition-colors truncate">{{ sim.name }}</div>
                  <div class="text-gray-500 text-[10px] sm:text-xs mt-1">{{ sim.providers?.name || 'Provider' }}</div>
                </NuxtLink>
              </div>
            </section>


            <!-- CTA -->
            <section class="bg-gradient-to-r from-[#8B5CF6]/10 to-[#EC4899]/10 p-4 rounded-xl border border-[#8B5CF6]/20">
              <h2 class="text-lg font-bold text-white mb-2">Free Play or Demo</h2>
              <p class="text-gray-300 mb-4 text-sm">
                {{ slot.info_demo_cta || `You can easily try out ${slot.name} online slot at SlotQuest without paying real money. Take advantage of our free demo mode and dive right in!` }}
              </p>
              <button
                @click="playSlot(); showInfoModal = false"
                class="w-full py-3 bg-gradient-to-r from-[#8B5CF6] to-[#EC4899] text-white font-bold rounded-lg hover:shadow-lg hover:shadow-purple-500/20 transition-all transform hover:scale-[1.02]"
              >
                {{ slot.info_demo_btn_text || 'Play Demo Now' }}
              </button>
            </section>
          </div>
        </div>
      </div>
    </template>
    </SlotHero>
  </div>
</template>

<script setup>
import { ref, computed, onMounted } from 'vue'
import { useSlotSEO } from '~/composables/useSlotSEO'
import {
  formatArticleDate,
  getEffectColorsFor,
  getAwardEffectColors,
  getAwardPublicClasses,
  getAwardBgClasses,
  getAwardIconClasses,
  getAwardTextClasses,
  getSlotIcon,
  getImageFormat,
  getVolatilityText,
  getMaxWin,
  formatReleaseDate,
  getSlotDescription,
  getShortDescription,
  getDetailedDescription,
  getCleanSlotName,
  getSlotNameWithKeyword,
  processCtaSubtitle,
  processConclusionRatingTitle,
  processPopularityTitle,
  processProfExpertQuote,
  processProfRecommendation,
  processConclusionText1,
  processConclusionVerdict,
  replaceKeywordsInText,
  getSlotThemes,
  getSlotBonuses,
  getSlotThemesFromDB,
  formatMaxWin,
  formatPaylines,
  formatNumber
} from '~/utils/slotFormatters'

import AuroraBackground from '~/components/ui/AuroraBackground.vue'
import BackgroundGradient from '~/components/ui/BackgroundGradient.vue'
import CometCard from '~/components/ui/CometCard.vue'
import CanvasRevealEffect from '~/components/ui/CanvasRevealEffect.vue'
import SlotHero from '~/components/slots/SlotHero.vue'
import SlotCharacteristics from '~/components/slots/SlotCharacteristics.vue'

// üéØ –ò–º–ø–æ—Ä—Ç composable –¥–ª—è JSON-LD
const { getJsonLdScriptSync, fetchRawJsonLd } = useJsonLd()

// –ü–æ–ª—É—á–∞–µ–º slug –∏–∑ —Ä–æ—É—Ç–∞
const route = useRoute()
const slug = route.params.slug

// --- SSR Data Fetching (Phase 4 SEO Optimization) ---
const { data: pageData, pending, error: fetchError, refresh } = await useAsyncData(
  'slot-page-data',
  async () => {
    const currentSlug = route.params.slug
    const slotRes = await $fetch(`http://localhost:3001/api/slots/${currentSlug}`)
    if (!slotRes) throw new Error(`–°–ª–æ—Ç —Å –∞–¥—Ä–µ—Å–æ–º "${currentSlug}" –Ω–µ –Ω–∞–π–¥–µ–Ω`)

    const [mechanicsRes, slotsRes, jsonLdRes] = await Promise.all([
      $fetch(`http://localhost:3001/api/mechanics/slot/${slotRes.id}`).catch(() => []),
      $fetch('http://localhost:3001/api/slots').catch(() => []),
      fetchRawJsonLd ? fetchRawJsonLd(slotRes.id).catch(() => null) : Promise.resolve(null)
    ])

    return {
      slot: slotRes,
      mechanics: mechanicsRes || [],
      allSlots: slotsRes?.data || slotsRes || [],
      jsonLd: jsonLdRes
    }
  },
  { watch: [() => route.params.slug] }
)

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
const slot = ref(pageData.value?.slot || {})
const allSlots = ref(pageData.value?.allSlots || [])
const slotMechanics = ref(pageData.value?.mechanics || [])
const jsonLdSchemas = ref(pageData.value?.jsonLd || null)

const loading = ref(pending.value)
const error = ref(fetchError.value?.message || null)

// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
watch(pageData, (newData) => {
  if (newData) {
    slot.value = newData.slot
    slotMechanics.value = newData.mechanics
    allSlots.value = newData.allSlots
    jsonLdSchemas.value = newData.jsonLd
  }
}, { deep: true, immediate: true })

watch(pending, (v) => loading.value = v)
watch(fetchError, (v) => error.value = v?.message || null)

// –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–∞
const showRatingPicker = ref(false)
const selectedStars = ref(null)
const hoverStars = ref(0)
const ratingSubmitting = ref(false)
const ratingSubmitted = ref(false)

// üÜï Computed properties for Enhanced Info Modal
const computedPros = computed(() => {
  if (slot.value.info_pros) {
    try { return JSON.parse(slot.value.info_pros) } catch(e) { /* fallback */ }
  }
  const s = slot.value
  const pros = []
  if (s.rtp >= 96.5) pros.push(`Above-average RTP of ${s.rtp}%`)
  else if (s.rtp) pros.push(`Competitive RTP of ${s.rtp}%`)
  if (s.max_win >= 5000) pros.push(`Massive max win of ${formatMaxWin(s.max_win)}x`)
  else if (s.max_win) pros.push(`Max win potential of ${formatMaxWin(s.max_win)}x`)
  if (s.demo_url) pros.push('Free demo mode available')
  if (s.slot_bonuses?.length > 0) pros.push(`${s.slot_bonuses.length} bonus features`)
  else pros.push('Engaging gameplay mechanics')
  if (s.paylines) pros.push(`${formatPaylines(s.paylines)} ways to win`)
  return pros.slice(0, 4)
})

const computedCons = computed(() => {
  if (slot.value.info_cons) {
    try { return JSON.parse(slot.value.info_cons) } catch(e) { /* fallback */ }
  }
  const s = slot.value
  const cons = []
  if (s.volatility?.toLowerCase() === 'high') cons.push('High volatility ‚Äî not for cautious players')
  else if (s.volatility?.toLowerCase() === 'low') cons.push('Low volatility ‚Äî smaller win potential')
  if (s.rtp && s.rtp < 96.0) cons.push(`Below-average RTP of ${s.rtp}%`)
  if (!s.slot_bonuses?.length) cons.push('Limited bonus features')
  if (cons.length === 0) cons.push('May not appeal to all play styles')
  cons.push('Requires stable internet connection')
  return cons.slice(0, 3)
})

const computedFaq = computed(() => {
  if (slot.value.info_faq) {
    try { return JSON.parse(slot.value.info_faq) } catch(e) { /* fallback */ }
  }
  const s = slot.value
  const name = s.name || 'this slot'
  const provider = s.providers?.name || 'the developer'
  return [
    { question: `Is ${name} safe to play online?`, answer: `Yes, ${name} is developed by ${provider}, a licensed and regulated game provider. All games are tested by independent auditing agencies to ensure fair play and random outcomes.` },
    { question: `What is the RTP of ${name}?`, answer: `The Return to Player (RTP) of ${name} is ${s.rtp || '96.0'}%. This means that, on average, for every $100 wagered, the game returns $${s.rtp || '96.0'} to players over time.` },
    { question: `Can I play ${name} for free?`, answer: `Yes! You can play ${name} in free demo mode right here on SlotQuest. No registration or deposit required ‚Äî just click "${s.info_demo_btn_text || 'Play Demo Now'}" to start spinning.` },
    { question: `What is the maximum win in ${name}?`, answer: `The maximum win in ${name} is ${formatMaxWin(s.max_win)}x your bet. ${s.max_win >= 5000 ? 'This is a very high max win potential!' : 'This offers solid winning potential for players.'}` },
    { question: `What is the volatility of ${name}?`, answer: `${name} has ${getVolatilityText(s.volatility).toLowerCase()} volatility. ${s.volatility?.toLowerCase() === 'high' ? 'This means wins are less frequent but can be much larger when they hit.' : s.volatility?.toLowerCase() === 'low' ? 'This means you can expect frequent, smaller wins.' : 'This provides a balanced mix of win frequency and size.'}` }
  ]
})

const computedReviews = computed(() => {
  if (slot.value.info_reviews) {
    try { return JSON.parse(slot.value.info_reviews) } catch(e) { /* fallback */ }
  }
  const s = slot.value
  const name = s.name || 'this slot'
  return [
    { author: 'Alex R.', rating: 5, text: `${name} is one of my favorite slots! The graphics are stunning and the bonus features keep me coming back. Highly recommended for anyone who enjoys ${s.volatility?.toLowerCase() === 'high' ? 'high-risk, high-reward' : 'engaging'} gameplay.`, date: '2024-12-15' },
    { author: 'Maria K.', rating: 4, text: `Great slot with solid RTP of ${s.rtp || '96.0'}%. The free spins feature is especially exciting. I play it regularly on SlotQuest in demo mode before wagering real money.`, date: '2024-11-28' },
    { author: 'James T.', rating: 4, text: `Decent slot from ${s.providers?.name || 'the developer'}. The ${formatMaxWin(s.max_win)}x max win potential is attractive. Love the theme and sound design. Would recommend trying the demo first.`, date: '2024-10-10' }
  ]
})

const computedHowToPlay = computed(() => {
  if (slot.value.info_how_to_play) {
    try { return JSON.parse(slot.value.info_how_to_play) } catch(e) { /* fallback */ }
  }
  const name = slot.value.name || 'the slot'
  const btnText = slot.value.info_demo_btn_text || 'Play Demo Now'
  return [
    { step: 'Open the Demo', text: `Click "${btnText}" on this page to launch ${name} in free play mode. No registration or deposit required.` },
    { step: 'Set Your Bet', text: `Use the controls at the bottom of the game screen to adjust your bet size. Start with the minimum bet to learn the mechanics.` },
    { step: 'Spin the Reels', text: `Click the Spin button or press Space. Watch for winning combinations across the ${formatPaylines(slot.value.paylines)} paylines.` },
    { step: 'Trigger Bonuses', text: `Land special symbols to activate bonus features like free spins, multipliers, and other rewards. Check the paytable (‚Ñπ) for details.` }
  ]
})

const similarSlots = computed(() => {
  if (!allSlots.value?.length || !slot.value?.id) return []
  const currentProvider = slot.value.providers?.id
  const currentId = slot.value.id
  return allSlots.value
    .filter(s => s.id !== currentId && (s.providers?.id === currentProvider || s.provider_id === currentProvider))
    .slice(0, 6)
})

// üåç Geo Targeting: –ü–∞—Ä—Å–∏–Ω–≥ —Ä–µ–≥–∏–æ–Ω–æ–≤ –∏–∑ –ë–î
const parsedGeoRegions = computed(() => {
  if (!slot.value?.geo_regions) return []
  try {
    const regions = JSON.parse(slot.value.geo_regions)
    return Array.isArray(regions) ? regions : []
  } catch (e) {
    return []
  }
})






// –í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤ —Å –∑–∞–º–µ–Ω–æ–π –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
// üîë –†–∞–±–æ—Ç–∞–µ—Ç –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ replaceKeywordsInText –¥–ª—è hero_keyword
const overviewDescription1 = computed(() => {
  if (!slot.value.overview_description_1) return ''

  let result = slot.value.overview_description_1

  // –ó–∞–º–µ–Ω–∞ [keyword_1] —Å —É—Å–∏–ª–µ–Ω–Ω–æ–π SEO-—Ä–∞–∑–º–µ—Ç–∫–æ–π
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º itemprop="keywords" –¥–ª—è Schema.org + —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—é
  if (slot.value.overview_keyword_1) {
    result = result.replace(
      /\[keyword_1\]/g,
      `<strong class="text-blue-700 font-bold" itemprop="keywords">${slot.value.overview_keyword_1}</strong>`,
    )
  }

  // –ó–∞–º–µ–Ω–∞ [keyword_2] —Å —É—Å–∏–ª–µ–Ω–Ω–æ–π SEO-—Ä–∞–∑–º–µ—Ç–∫–æ–π
  if (slot.value.overview_keyword_2) {
    result = result.replace(
      /\[keyword_2\]/g,
      `<strong class="text-blue-700 font-bold" itemprop="keywords">${slot.value.overview_keyword_2}</strong>`,
    )
  }

  // –ó–∞–º–µ–Ω–∞ [keyword_3] —Å —É—Å–∏–ª–µ–Ω–Ω–æ–π SEO-—Ä–∞–∑–º–µ—Ç–∫–æ–π
  if (slot.value.overview_keyword_3) {
    result = result.replace(
      /\[keyword_3\]/g,
      `<strong class="text-blue-700 font-bold" itemprop="keywords">${slot.value.overview_keyword_3}</strong>`,
    )
  }

  console.log('üîÑ Overview –∑–∞–º–µ–Ω–∞:', {
    –∏—Å—Ö–æ–¥–Ω—ã–π: slot.value.overview_description_1,
    —Ä–µ–∑—É–ª—å—Ç–∞—Ç: result,
    keywords: {
      k1: slot.value.overview_keyword_1,
      k2: slot.value.overview_keyword_2,
      k3: slot.value.overview_keyword_3,
    },
  })

  return result
})

const overviewDescription2 = computed(() => {
  if (!slot.value.overview_description_2) return ''

  let result = slot.value.overview_description_2

  // –ó–∞–º–µ–Ω–∞ [keyword_1] —Å —É—Å–∏–ª–µ–Ω–Ω–æ–π SEO-—Ä–∞–∑–º–µ—Ç–∫–æ–π
  if (slot.value.overview_keyword_1) {
    result = result.replace(
      /\[keyword_1\]/g,
      `<strong class="text-blue-700 font-bold" itemprop="keywords">${slot.value.overview_keyword_1}</strong>`,
    )
  }

  // –ó–∞–º–µ–Ω–∞ [keyword_2] —Å —É—Å–∏–ª–µ–Ω–Ω–æ–π SEO-—Ä–∞–∑–º–µ—Ç–∫–æ–π
  if (slot.value.overview_keyword_2) {
    result = result.replace(
      /\[keyword_2\]/g,
      `<strong class="text-blue-700 font-bold" itemprop="keywords">${slot.value.overview_keyword_2}</strong>`,
    )
  }

  // –ó–∞–º–µ–Ω–∞ [keyword_3] —Å —É—Å–∏–ª–µ–Ω–Ω–æ–π SEO-—Ä–∞–∑–º–µ—Ç–∫–æ–π
  if (slot.value.overview_keyword_3) {
    result = result.replace(
      /\[keyword_3\]/g,
      `<strong class="text-blue-700 font-bold" itemprop="keywords">${slot.value.overview_keyword_3}</strong>`,
    )
  }

  return result
})


// –ù–∞–≥—Ä–∞–¥—ã —Ç–µ–ø–µ—Ä—å —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É (—É–±—Ä–∞–ª–∏ —Ö–∞—Ä–¥–∫–æ–¥ –¥–ª—è Gates of Olympus)



// –ú–µ—Ç–æ–¥—ã

// üéØ Initialize SEO
useSlotSEO({
  slot,
  parsedGeoRegions,
  computedFaq,
  computedHowToPlay,
  computedReviews,
  similarSlots,
  loading,
  error
})

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö slot–∞
const refreshSlot = async () => {
  await refresh()
}

const playSlot = () => {
  if (!slot.value) return

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å—Å—ã–ª–∫–∞ –¥–ª—è –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏
  if (slot.value.demo_url && slot.value.demo_url.trim()) {
    // –û—Ç–∫—Ä—ã–≤–∞–µ–º –¥–µ–º–æ-–≤–µ—Ä—Å–∏—é –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
    window.open(slot.value.demo_url, '_blank', 'noopener,noreferrer')
  } else {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, —á—Ç–æ –¥–µ–º–æ-–≤–µ—Ä—Å–∏—è –ø–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
    alert(
      `–î–µ–º–æ-–≤–µ—Ä—Å–∏—è –¥–ª—è –∏–≥—Ä—ã "${slot.value.name || 'slot'}" –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–∞–π—Ç–∞.`,
    )
  }
}

const playForReal = () => {
  if (!slot.value) return

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å—Å—ã–ª–∫–∞ –¥–ª—è –∏–≥—Ä—ã for real money
  if (slot.value.real_play_url && slot.value.real_play_url.trim()) {
    // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–∞–∑–∏–Ω–æ –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
    window.open(slot.value.real_play_url, '_blank', 'noopener,noreferrer')
  } else {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º —Å–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
    alert(
      `–ò–≥—Ä–∞ for real money –¥–ª—è "${slot.value.name || 'slot'}" –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–∞–π—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞–∑–∏–Ω–æ.`,
    )
  }
}

const findCasino = () => {
  if (!slot.value) return
  // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ –∫–∞–∑–∏–Ω–æ —Å –±–æ–Ω—É—Å–∞–º–∏
  alert(`–ü–æ–∏—Å–∫ –ª—É—á—à–∏—Ö –∫–∞–∑–∏–Ω–æ –¥–ª—è –∏–≥—Ä—ã –≤ ${slot.value.name || 'slot'}`)
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–µ–¥–∏–∞ —Å–æ–±—ã—Ç–∏–π
const handleSlotImageError = (event) => {
  event.target.parentElement.innerHTML =
    '<div class="flex items-center justify-center h-full text-white/60"><svg class="w-12 h-12 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><span>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</span></div>'
}

const handleSlotVideoError = (event) => {
  event.target.parentElement.innerHTML =
    '<div class="flex items-center justify-center h-full text-white/60"><svg class="w-12 h-12 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg><span>–í–∏–¥–µ–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</span></div>'
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ
const openImageFullscreen = () => {
  if (!slot.value?.image_url) return

  // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  const modal = document.createElement('div')
  modal.className =
    'fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4'
  modal.onclick = () => modal.remove()

  const img = document.createElement('img')
  img.src = slot.value.image_url
  img.alt = `–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ slot–∞ ${slot.value.name}`
  img.className = 'max-w-full max-h-full object-contain rounded-xl shadow-2xl'
  img.onclick = (e) => e.stopPropagation()

  const closeBtn = document.createElement('button')
  closeBtn.innerHTML = '‚úï'
  closeBtn.className =
    'absolute top-4 right-4 w-12 h-12 bg-white/10 hover:bg-white/20 text-white text-xl font-bold rounded-full transition-colors'
  closeBtn.onclick = () => modal.remove()

  modal.appendChild(img)
  modal.appendChild(closeBtn)
  document.body.appendChild(modal)
}


// üì± Info Popup & Like State
const showInfoModal = ref(false)
const isLiked = ref(false)

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–∞–π–∫–∞ –∏–∑ localStorage
onMounted(() => {
  if (process.client && slot.value?.id) {
    const key = `slot_like_${slot.value.id}`
    isLiked.value = localStorage.getItem(key) === 'true'
  }
})

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–ª–æ—Ç–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –ª–∞–π–∫–∞
watch(
  () => slot.value?.id,
  (newId) => {
    if (process.client && newId) {
      const key = `slot_like_${newId}`
      isLiked.value = localStorage.getItem(key) === 'true'
    }
  }
)

const toggleLike = () => {
  if (!process.client || !slot.value?.id) return

  isLiked.value = !isLiked.value
  const key = `slot_like_${slot.value.id}`

  if (isLiked.value) {
    localStorage.setItem(key, 'true')
    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä –≤ –±—É–¥—É—â–µ–º
  } else {
    localStorage.removeItem(key)
  }
}






// –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–∞
const toggleRatingPicker = () => {
  showRatingPicker.value = !showRatingPicker.value
  if (!showRatingPicker.value) {
    selectedStars.value = null
    hoverStars.value = 0
    ratingSubmitted.value = false
  }
}

const setHover = (value) => {
  hoverStars.value = value
}

const clearHover = () => {
  hoverStars.value = 0
}

const pickRating = (value) => {
  selectedStars.value = value
}

const submitRating = async () => {
  if (selectedStars.value === null || !slot.value?.id) return
  try {
    ratingSubmitting.value = true
    // –ó–∞–≥–ª—É—à–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ API –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤
    await new Promise((resolve) => setTimeout(resolve, 700))
    ratingSubmitted.value = true
  } finally {
    ratingSubmitting.value = false
  }
}



















// Note: `useAsyncData` automatically handles data fetching on route parameter changes due to the `watch` option.


</script>

<style scoped>
@keyframes scaleX {
  from {
    transform: scaleX(0);
  }
  to {
    transform: scaleX(1);
  }
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
@keyframes gradient {
  0%,
  100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

@keyframes heartbeat {
  0%, 100% { transform: scale(1.2); }
  50% { transform: scale(1.35); }
}

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

.animate-gradient {
  background-size: 200% 200%;
  animation: gradient 3s ease infinite;
}

/* –£–ª—É—á—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ first-letter */
.first-letter\:text-5xl::first-letter {
  line-height: 0.8;
}

/* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

article {
  animation: fadeInUp 0.6s ease-out;
}

/* –£–ª—É—á—à–µ–Ω–Ω—ã–π —Ñ–æ–∫—É—Å –¥–ª—è accessibility */
*:focus-visible {
  outline: 3px solid #4f46e5;
  outline-offset: 2px;
  border-radius: 4px;
}

/* Animated Gradient Border for Icons */
@keyframes spin-gradient {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.animated-gradient-border {
  position: relative;
  z-index: 10;
  border: none !important; /* Remove defaults if any */
}

.animated-gradient-border::before {
  content: '';
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  background: conic-gradient(from 0deg, #3B82F6, #8B5CF6, #EC4899, #EF4444, #F59E0B, #10B981, #3B82F6);
  z-index: -1;
  animation: spin-gradient 4s linear infinite;

  /* Create a hollow ring */
  padding: 2px;
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
}

/* Optional: Glow effect */
.animated-gradient-border::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: inherit;
  filter: blur(5px);
  z-index: -2;
  opacity: 0.5;
}
</style>
