generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model providers {
  id             String    @id
  name           String    @unique
  slug           String    @unique
  description    String?
  logo_url       String?
  website_url    String?
  founded_year   Int?
  country        String?
  is_active      Boolean?  @default(true)
  created_at     DateTime? @default(now())
  updated_at     DateTime? @default(now())
  is_recommended Boolean?  @default(false)
  slots          slots[]
}

model slot_categories {
  id          String    @id
  name        String    @unique
  slug        String    @unique
  description String?
  created_at  DateTime? @default(now())
  is_active   Boolean?  @default(true)
  updated_at  DateTime? @default(now())
  slots       slots[]
}

model slots {
  id                                    String           @id
  name                                  String
  slug                                  String           @unique
  provider_id                           String
  category_id                           String?
  theme_id                              String?
  description                           String?
  thumbnail_url                         String?
  media_type                            String?
  image_url                             String?
  video_url                             String?
  demo_url                              String?
  real_play_url                         String?
  screenshots                           String?
  rtp                                   Decimal?
  volatility                            String?
  min_bet                               Decimal?
  max_bet                               Decimal?
  max_win                               Decimal?
  game_field                            String?
  paylines                              String?
  reels                                 Int?             @default(5)
  rows                                  Int?             @default(3)
  theme                                 String?
  features                              String?
  release_date                          DateTime?
  is_mobile_compatible                  Boolean?         @default(true)
  is_demo_available                     Boolean?         @default(true)
  rating                                Decimal?         @default(0.00)
  rating_count                          Int?             @default(0)
  popularity_rank                       Int?
  popularity_percentage                 Int?
  show_awards                           Boolean?         @default(false)
  awards                                Json?
  play_count                            Int?             @default(0)
  is_active                             Boolean?         @default(true)
  created_at                            DateTime?        @default(now())
  updated_at                            DateTime?        @default(now())
  bonus_frequency                       String?
  hero_keyword                          String?
  hero_keyword_2                        String?
  hero_keyword_3                        String?
  mechanics_cascade_description         String?
  mechanics_cascade_details             String?
  mechanics_cascade_title               String?
  mechanics_intro                       String?
  mechanics_multipliers_description     String?
  mechanics_multipliers_details         String?
  mechanics_multipliers_important       String?
  mechanics_multipliers_important_title String?
  mechanics_multipliers_title           String?
  mechanics_scatter_description         String?
  mechanics_scatter_details             String?
  mechanics_scatter_title               String?
  mechanics_title                       String?
  mechanics_freespins_title             String?
  mechanics_freespins_description       String?
  mechanics_freespins_details           String?
  mechanics_wilds_title                 String?
  mechanics_wilds_description           String?
  mechanics_wilds_details               String?
  mechanics_bonus_title                 String?
  mechanics_bonus_description           String?
  mechanics_bonus_details               String?
  free_spins_title                      String?
  free_spins_intro                      String?
  free_spins_instant_title              String?
  free_spins_4_scatter_desc             String?
  free_spins_4_scatter                  String?
  free_spins_5_scatter_desc             String?
  free_spins_5_scatter                  String?
  free_spins_6_scatter_desc             String?
  free_spins_6_scatter                  String?
  free_spins_features_title             String?
  free_spins_feature_1                  String?
  free_spins_feature_2                  String?
  free_spins_feature_3                  String?
  free_spins_feature_4                  String?
  free_spins_ante_title                 String?
  free_spins_ante_description           String?
  free_spins_ante_bet_value             String?
  free_spins_ante_bet_effect            String?
  ante_bet_title                        String?
  ante_bet_description                  String?
  ante_bet_warning                      String?
  // FAQ (Frequently Asked Questions)
  faq_title                             String?
  faq_q1_emoji                          String?
  faq_q1_question                       String?
  faq_q1_answer                         String?
  faq_q2_emoji                          String?
  faq_q2_question                       String?
  faq_q2_answer                         String?
  faq_q3_emoji                          String?
  faq_q3_question                       String?
  faq_q3_answer                         String?
  faq_q4_emoji                          String?
  faq_q4_question                       String?
  faq_q4_answer                         String?
  overview_description_1                String?
  overview_description_2                String?
  overview_features_1                   String?
  overview_features_2                   String?
  overview_features_3                   String?
  overview_features_4                   String?
  overview_features_5                   String?
  overview_features_6                   String?
  overview_features_title               String?
  overview_keyword_1                    String?
  overview_keyword_2                    String?
  overview_keyword_3                    String?
  overview_title                        String?
  popularity_fact_icon_1                String?
  popularity_fact_icon_2                String?
  popularity_fact_icon_3                String?
  popularity_fact_icon_4                String?
  popularity_fact_text_1                String?
  popularity_fact_text_2                String?
  popularity_fact_text_3                String?
  popularity_fact_text_4                String?
  popularity_facts_title                String?
  popularity_global_desc                String?
  popularity_global_rank                String?
  popularity_label_1                    String?
  popularity_label_2                    String?
  popularity_label_3                    String?
  popularity_label_4                    String?
  popularity_players_count              String?
  popularity_players_desc               String?
  popularity_rank_1                     String?
  popularity_rank_2                     String?
  popularity_rank_3                     String?
  popularity_rank_4                     String?
  popularity_rtp_desc                   String?
  popularity_rtp_score                  String?
  popularity_stats_title                String?
  popularity_title                      String?
  popularity_trend_title                String?
  popularity_trend_y1                   Int?
  popularity_trend_y2                   Int?
  popularity_trend_y3                   Int?
  popularity_trend_y4                   Int?
  popularity_width_1                    Int?
  popularity_width_2                    Int?
  popularity_width_3                    Int?
  popularity_width_4                    Int?
  popularity_year_1                     String?
  popularity_year_2                     String?
  popularity_year_3                     String?
  popularity_year_4                     String?
  real_rtp                              Decimal?
  slot_bonuses                          slot_bonuses[]
  slot_features                         slot_features[]
  slot_mechanics                        slot_mechanics[]

  // Strategies & Tips (dynamic content for gameplay advice)
  strategy_title          String? @map("strategies_title")
  strategy_intro          String? @map("strategies_intro")
  strategy_beginner_title String?
  strategy_beginner_1     String?
  strategy_beginner_2     String?
  strategy_beginner_3     String?
  strategy_beginner_4     String?
  strategy_advanced_title String?
  strategy_advanced_1     String?
  strategy_advanced_2     String?
  strategy_advanced_3     String?
  strategy_advanced_4     String?

  // Отзывы игроков - заголовки и статистика
  reviews_title             String?
  reviews_subtitle          String?
  reviews_overall_rating    String?
  reviews_total_count       String?
  reviews_positive_percent  String?
  reviews_recommend_percent String?
  // Распределение оценок (5-1 звезда)
  reviews_5_stars_percent   String?
  reviews_5_stars_count     String?
  reviews_4_stars_percent   String?
  reviews_4_stars_count     String?
  reviews_3_stars_percent   String?
  reviews_3_stars_count     String?
  reviews_2_stars_percent   String?
  reviews_2_stars_count     String?
  reviews_1_stars_percent   String?
  reviews_1_stars_count     String?
  // Ключевые моменты из отзывов (sentiment analysis)
  reviews_sentiment_1_title String?
  reviews_sentiment_1_desc  String?
  reviews_sentiment_2_title String?
  reviews_sentiment_2_desc  String?
  reviews_sentiment_3_title String?
  reviews_sentiment_3_desc  String?
  reviews_sentiment_4_title String?
  reviews_sentiment_4_desc  String?
  // Индивидуальные отзывы (3 основных отзыва)
  review_1_author           String?
  review_1_avatar_letter    String?
  review_1_rating           String?
  review_1_badge            String?
  review_1_text             String?
  review_1_likes            String?
  review_1_replies          String?
  review_1_date             String?
  review_2_author           String?
  review_2_avatar_letter    String?
  review_2_rating           String?
  review_2_badge            String?
  review_2_text             String?
  review_2_likes            String?
  review_2_replies          String?
  review_2_date             String?
  review_3_author           String?
  review_3_avatar_letter    String?
  review_3_rating           String?
  review_3_badge            String?
  review_3_text             String?
  review_3_likes            String?
  review_3_replies          String?
  review_3_date             String?

  // Профессиональная оценка - заголовки и общая информация
  prof_rating_title                   String?
  prof_rating_subtitle                String?
  prof_rating_overall_title           String?
  prof_rating_overall_desc            String?
  prof_rating_overall_score           String?
  prof_rating_overall_stars           String?
  // Детальные метрики (5 категорий оценки)
  prof_rating_metric_1_emoji          String?
  prof_rating_metric_1_name           String?
  prof_rating_metric_1_score          String?
  prof_rating_metric_2_emoji          String?
  prof_rating_metric_2_name           String?
  prof_rating_metric_2_score          String?
  prof_rating_metric_3_emoji          String?
  prof_rating_metric_3_name           String?
  prof_rating_metric_3_score          String?
  prof_rating_metric_4_emoji          String?
  prof_rating_metric_4_name           String?
  prof_rating_metric_4_score          String?
  prof_rating_metric_5_emoji          String?
  prof_rating_metric_5_name           String?
  prof_rating_metric_5_score          String?
  // Экспертное заключение
  prof_rating_expert_title            String? // Заголовок секции "Экспертное заключение"
  prof_rating_expert_name             String? // Имя эксперта "Сертифицированный эксперт"
  prof_rating_expert_position         String? // Должность "Ведущий аналитик игровой индустрии • 8+ лет опыта"
  prof_rating_expert_quote            String? // Текст экспертной цитаты с плейсхолдером [prof_expert_keyword]
  prof_rating_expert_quote_keyword    String? // Ключевое слово для замены в цитате эксперта
  // Предупреждение о волатильности
  prof_rating_warning_title           String? // Заголовок "Предупреждение о волатильности"
  prof_rating_warning_text            String? // Текст предупреждения
  // Преимущества (5 пунктов)
  prof_rating_pros_title              String? // Заголовок секции преимуществ "✅ ПРЕИМУЩЕСТВА"
  prof_rating_pros_1_title            String? // Заголовок преимущества 1
  prof_rating_pros_1_desc             String? // Описание преимущества 1
  prof_rating_pros_2_title            String?
  prof_rating_pros_2_desc             String?
  prof_rating_pros_3_title            String?
  prof_rating_pros_3_desc             String?
  prof_rating_pros_4_title            String?
  prof_rating_pros_4_desc             String?
  prof_rating_pros_5_title            String?
  prof_rating_pros_5_desc             String?
  // Недостатки (5 пунктов)
  prof_rating_cons_title              String? // Заголовок секции недостатков "❌ НЕДОСТАТКИ"
  prof_rating_cons_1_title            String? // Заголовок недостатка 1
  prof_rating_cons_1_desc             String? // Описание недостатка 1
  prof_rating_cons_2_title            String?
  prof_rating_cons_2_desc             String?
  prof_rating_cons_3_title            String?
  prof_rating_cons_3_desc             String?
  prof_rating_cons_4_title            String?
  prof_rating_cons_4_desc             String?
  prof_rating_cons_5_title            String?
  prof_rating_cons_5_desc             String?
  // Итоговая рекомендация
  prof_rating_recommendation_title    String? // Заголовок "Итоговая рекомендация"
  prof_rating_recommendation_subtitle String? // Подзаголовок "От экспертов SlotQuest"
  prof_rating_recommendation_text     String? // Текст с плейсхолдером [prof_recommendation_keyword]
  prof_rating_recommendation_keyword  String? // Ключевое слово для замены в тексте

  // Секция "Заключение" (Conclusion)
  conclusion_title           String?
  // Final Rating - заголовок с ключевым словом
  conclusion_rating_title    String? // Шаблон заголовка "Итоговая оценка [conclusion_keyword]"
  conclusion_rating_keyword  String? // Ключевое слово для использования в заголовке Final Rating
  conclusion_text_1          String?
  conclusion_text_1_keyword  String? // Ключевое слово для использования в начале Paragraph 1 (заменяет [conclusion_text_keyword])
  conclusion_text_2          String?
  // Кому подходит (заголовок + 4 пункта)
  conclusion_suitable_title  String? // Заголовок секции "Кому подходит"
  conclusion_suitable_1      String?
  conclusion_suitable_2      String?
  conclusion_suitable_3      String?
  conclusion_suitable_4      String?
  // Важно помнить (заголовок + 4 пункта)
  conclusion_warning_title   String? // Заголовок секции "Важно помнить"
  conclusion_warning_1       String?
  conclusion_warning_2       String?
  conclusion_warning_3       String?
  conclusion_warning_4       String?
  // Финальный вердикт
  conclusion_verdict_title   String? // Заголовок секции "Финальный вердикт"
  conclusion_verdict_text    String? // Текст финального вердикта с плейсхолдером [conclusion_verdict_keyword]
  conclusion_verdict_keyword String? // Ключевое слово для замены в тексте финального вердикта

  // Секция CTA "Время побеждать"
  cta_title             String?
  cta_subtitle          String?
  cta_subtitle_keyword  String? // Ключевое слово для использования в subtitle вместо названия слота
  cta_potential         String?
  cta_potential_prefix  String? // Текст перед значением win potential (например: "Потенциал выигрыша до")
  cta_potential_suffix  String? // Текст после значения win potential (например: "ждёт вас!")
  // Фичи/Преимущества (3 блока по 3 поля)
  cta_feature_1_emoji   String?
  cta_feature_1_title   String?
  cta_feature_1_desc    String?
  cta_feature_2_emoji   String?
  cta_feature_2_title   String?
  cta_feature_2_desc    String?
  cta_feature_3_emoji   String?
  cta_feature_3_title   String?
  cta_feature_3_desc    String?
  // Кнопки призыва к действию (2 кнопки по 3 поля)
  cta_button_demo_emoji String?
  cta_button_demo_text  String?
  cta_button_demo_url   String?
  cta_button_real_emoji String?
  cta_button_real_text  String?
  cta_button_real_url   String?
  // Элементы доверия (3 пункта)
  cta_trust_1_text      String?
  cta_trust_2_text      String?
  cta_trust_3_text      String?

  slot_categories slot_categories? @relation(fields: [category_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  providers       providers        @relation(fields: [provider_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  themes          themes?          @relation(fields: [theme_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([provider_id], map: "idx_slots_provider_id")
  @@index([category_id], map: "idx_slots_category_id")
  @@index([theme_id], map: "idx_slots_theme_id")
  @@index([is_active], map: "idx_slots_is_active")
  @@index([rating(sort: Desc)], map: "idx_slots_rating")
}

model features {
  id            Int             @id @default(autoincrement())
  name          String
  slug          String          @unique
  description   String?
  type          String?
  icon          String?
  color         String?         @default("#8b5cf6")
  image_url     String?
  sort_order    Int?            @default(0)
  is_active     Boolean         @default(true)
  is_popular    Boolean         @default(false)
  is_featured   Boolean         @default(false)
  created_at    DateTime        @default(now())
  updated_at    DateTime        @updatedAt
  slot_features slot_features[]

  @@index([type], map: "idx_features_type")
  @@index([is_active], map: "idx_features_is_active")
  @@index([is_popular], map: "idx_features_is_popular")
  @@index([sort_order], map: "idx_features_sort_order")
}

model slot_features {
  id         Int      @id @default(autoincrement())
  slot_id    String
  feature_id Int
  created_at DateTime @default(now())
  features   features @relation(fields: [feature_id], references: [id], onDelete: Cascade)
  slots      slots    @relation(fields: [slot_id], references: [id], onDelete: Cascade)

  @@unique([slot_id, feature_id])
  @@index([slot_id], map: "idx_slot_features_slot_id")
  @@index([feature_id], map: "idx_slot_features_feature_id")
}

model themes {
  id          String   @id @default(cuid())
  name        String   @unique
  slug        String   @unique
  description String?
  color       String?
  icon        String?
  is_featured Boolean  @default(false)
  is_active   Boolean  @default(true)
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
  slots       slots[]

  @@index([is_active])
  @@index([is_featured])
  @@index([slug])
}

model bonuses {
  id           Int            @id @default(autoincrement())
  name         String         @unique
  slug         String         @unique
  description  String?
  type         String?
  icon         String?
  color        String?        @default("#8b5cf6")
  image_url    String?
  sort_order   Int?           @default(0)
  is_active    Boolean        @default(true)
  is_popular   Boolean        @default(false)
  is_featured  Boolean        @default(false)
  created_at   DateTime       @default(now())
  updated_at   DateTime       @updatedAt
  slot_bonuses slot_bonuses[]

  @@index([type], map: "idx_bonuses_type")
  @@index([is_active], map: "idx_bonuses_is_active")
  @@index([is_popular], map: "idx_bonuses_is_popular")
  @@index([sort_order], map: "idx_bonuses_sort_order")
}

model slot_bonuses {
  id         Int      @id @default(autoincrement())
  slot_id    String
  bonus_id   Int
  created_at DateTime @default(now())
  bonuses    bonuses  @relation(fields: [bonus_id], references: [id], onDelete: Cascade)
  slots      slots    @relation(fields: [slot_id], references: [id], onDelete: Cascade)

  @@unique([slot_id, bonus_id])
  @@index([slot_id], map: "idx_slot_bonuses_slot_id")
  @@index([bonus_id], map: "idx_slot_bonuses_bonus_id")
}

model mechanics {
  id             Int              @id @default(autoincrement())
  name           String           @unique
  slug           String           @unique
  description    String?
  type           String?
  icon           String?
  color          String?          @default("#8b5cf6")
  image_url      String?
  sort_order     Int?             @default(0)
  is_active      Boolean          @default(true)
  is_popular     Boolean          @default(false)
  is_featured    Boolean          @default(false)
  created_at     DateTime         @default(now())
  updated_at     DateTime         @updatedAt
  slot_mechanics slot_mechanics[]

  @@index([type], map: "idx_mechanics_type")
  @@index([is_active], map: "idx_mechanics_is_active")
  @@index([is_popular], map: "idx_mechanics_is_popular")
  @@index([sort_order], map: "idx_mechanics_sort_order")
}

model slot_mechanics {
  id          Int       @id @default(autoincrement())
  slot_id     String
  mechanic_id Int
  created_at  DateTime  @default(now())
  mechanics   mechanics @relation(fields: [mechanic_id], references: [id], onDelete: Cascade)
  slots       slots     @relation(fields: [slot_id], references: [id], onDelete: Cascade)

  @@unique([slot_id, mechanic_id])
  @@index([slot_id], map: "idx_slot_mechanics_slot_id")
  @@index([mechanic_id], map: "idx_slot_mechanics_mechanic_id")
}
