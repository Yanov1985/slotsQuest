# ‚úÖ –§–ò–ù–ê–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï - –ö–û–ù–§–õ–ò–ö–¢ –ò–ú–Å–ù –ò–°–ü–†–ê–í–õ–ï–ù!

## üîß –ù–∞—Å—Ç–æ—è—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø–æ–ø—ã—Ç–æ–∫ (—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma, —É–¥–∞–ª–µ–Ω–∏–µ node_modules, –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π) **13 TypeScript –æ—à–∏–±–æ–∫ –æ—Å—Ç–∞–ª–∏—Å—å**:

```
error TS2353: 'slot_themes' does not exist in type 'slot_themesInclude<DefaultArgs>'
```

### **–ò—Å—Ç–∏–Ω–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞:**

**–ö–û–ù–§–õ–ò–ö–¢ –ò–ú–Å–ù –í –°–•–ï–ú–ï PRISMA!**

–í —Å—Ö–µ–º–µ –±—ã–ª–æ:

- **–ú–æ–¥–µ–ª—å:** `slot_themes` (snake_case)
- **–ü–æ–ª–µ –≤ –º–æ–¥–µ–ª–∏ `slots`:** `slot_themes` (snake_case)
- **–ü–æ–ª–µ –≤ –º–æ–¥–µ–ª–∏ `themes`:** `slot_themes` (snake_case)

**–ü—Ä–æ–±–ª–µ–º–∞:** Prisma –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∞ —Ç–∏–ø `slot_themesInclude`, –Ω–æ TypeScript –Ω–µ –º–æ–≥ —Ä–∞–∑–ª–∏—á–∏—Ç—å:

- –û–±—Ä–∞—â–∞–µ–º—Å—è –ª–∏ –º—ã –∫ **–º–æ–¥–µ–ª–∏** `slot_themes`?
- –û–±—Ä–∞—â–∞–µ–º—Å—è –ª–∏ –º—ã –∫ **–ø–æ–ª—é** `slot_themes`?

–≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Ç–∏–ø–æ–≤, –∏ TypeScript –≤—ã–¥–∞–≤–∞–ª –æ—à–∏–±–∫–∏.

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï:

### **–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª–∏ –ø–æ–ª—è –≤ camelCase**

–í —Å—Ö–µ–º–µ Prisma:

**–ë—ã–ª–æ:**

```prisma
model slots {
  // ...
  slot_themes     slot_themes[] // ‚ùå –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º–µ–Ω–∏!
}

model themes {
  // ...
  slot_themes      slot_themes[] // ‚ùå –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º–µ–Ω–∏!
}
```

**–°—Ç–∞–ª–æ:**

```prisma
model slots {
  // ...
  slotThemes      slot_themes[]    @relation("SlotToThemes") // ‚úÖ camelCase + —è–≤–Ω–∞—è —Å–≤—è–∑—å
}

model slot_themes {
  id         String   @id @default(cuid())
  slot_id    String
  theme_id   String
  created_at DateTime @default(now())
  slots      slots    @relation("SlotToThemes", fields: [slot_id], references: [id], onDelete: Cascade)
  themes     themes   @relation("ThemeToSlots", fields: [theme_id], references: [id], onDelete: Cascade)

  @@unique([slot_id, theme_id])
  @@index([slot_id], map: "idx_slot_themes_slot_id")
  @@index([theme_id], map: "idx_slot_themes_theme_id")
}

model themes {
  // ...
  slotThemes       slot_themes[] @relation("ThemeToSlots") // ‚úÖ camelCase + —è–≤–Ω–∞—è —Å–≤—è–∑—å
}
```

### **–û–±–Ω–æ–≤–∏–ª–∏ backend –∫–æ–¥**

–ó–∞–º–µ–Ω–∏–ª–∏ **–í–°–ï** —É–ø–æ–º–∏–Ω–∞–Ω–∏—è `slot_themes` –Ω–∞ `slotThemes` –≤:

- `backend/src/slots/slots.service.ts`
- `backend/src/slots/slots-prisma.service.ts`
- `backend/src/themes/themes.service.ts`

**–ë—ã–ª–æ:**

```typescript
include: {
  slot_themes: {  // ‚ùå
    include: {
      themes: true,
    },
  },
}
```

**–°—Ç–∞–ª–æ:**

```typescript
include: {
  slotThemes: {  // ‚úÖ
    include: {
      themes: true,
    },
  },
}
```

### **–û–±–Ω–æ–≤–∏–ª–∏ frontend –∫–æ–¥**

–ó–∞–º–µ–Ω–∏–ª–∏ **–í–°–ï** —É–ø–æ–º–∏–Ω–∞–Ω–∏—è `slot.slot_themes` –Ω–∞ `slot.slotThemes` –≤:

- `frontend/pages/admin/slots/[id].vue`
- `frontend/pages/slots/[slug].vue`

**–ë—ã–ª–æ:**

```vue
<template v-if="slot?.slot_themes && slot.slot_themes.length > 0">
  <span v-for="slotTheme in slot.slot_themes" :key="slotTheme.id">
    {{ slotTheme.themes?.name }}
  </span>
</template>
```

**–°—Ç–∞–ª–æ:**

```vue
<template v-if="slot?.slotThemes && slot.slotThemes.length > 0">
  <span v-for="slotTheme in slot.slotThemes" :key="slotTheme.id">
    {{ slotTheme.themes?.name }}
  </span>
</template>
```

---

## üéì –û–±—ä—è—Å–Ω–µ–Ω–∏–µ (–º–µ—Ç–∞—Ñ–æ—Ä–∞):

### **–ü—É—Ç–∞–Ω–∏—Ü–∞ —Å –∏–º–µ–Ω–∞–º–∏ –≤ –∫–æ–º–ø–∞–Ω–∏–∏** üè¢

#### **–ë—ã–ª–æ (–∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º—ë–Ω):**

–í –∫–æ–º–ø–∞–Ω–∏–∏ –µ—Å—Ç—å:

- **–û—Ç–¥–µ–ª:** "–ü—Ä–æ–¥–∞–∂–∏" (`sales`)
- **–°–æ—Ç—Ä—É–¥–Ω–∏–∫ –≤ –æ—Ç–¥–µ–ª–µ "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥":** —Ç–æ–∂–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "–ü—Ä–æ–¥–∞–∂–∏" (`sales`)

–ö–æ–≥–¥–∞ –≥–æ–≤–æ—Ä–∏—à—å "–ü–æ–∑–æ–≤–∏ –ü—Ä–æ–¥–∞–∂–∏", –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ:

- –í–µ—Å—å **–æ—Ç–¥–µ–ª** –ü—Ä–æ–¥–∞–∂–∏?
- **–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∞** –ø–æ –∏–º–µ–Ω–∏ –ü—Ä–æ–¥–∞–∂–∏?

‚ùå **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—É—Ç–∞–Ω–∏—Ü–∞! –ù–∏–∫—Ç–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç, –∫–æ–≥–æ –∑–≤–∞—Ç—å!

#### **–°—Ç–∞–ª–æ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞):**

- **–û—Ç–¥–µ–ª:** "–ü—Ä–æ–¥–∞–∂–∏" (`sales`)
- **–°–æ—Ç—Ä—É–¥–Ω–∏–∫:** "–ò–≤–∞–Ω –ü—Ä–æ–¥–∞–∂–Ω–∏–∫–æ–≤" (`salesPerson`)

–¢–µ–ø–µ—Ä—å –∫–æ–≥–¥–∞ –≥–æ–≤–æ—Ä–∏—à—å "–ü–æ–∑–æ–≤–∏ –ò–≤–∞–Ω–∞ –ü—Ä–æ–¥–∞–∂–Ω–∏–∫–æ–≤–∞", –≤—Å–µ –ø–æ–Ω–∏–º–∞—é—Ç!

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—ã!

**–¢–∞–∫ –∂–µ –∏ —Å Prisma:**

- **–ë—ã–ª–æ:** –ú–æ–¥–µ–ª—å `slot_themes` –∏ –ø–æ–ª–µ `slot_themes` ‚Üí TypeScript –ø—É—Ç–∞–ª—Å—è
- **–°—Ç–∞–ª–æ:** –ú–æ–¥–µ–ª—å `slot_themes` –∏ –ø–æ–ª–µ `slotThemes` ‚Üí TypeScript –ø–æ–Ω–∏–º–∞–µ—Ç!

---

## üöÄ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ 1: Backend –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –ë–ï–ó –û–®–ò–ë–û–ö**

–û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `npm run dev`:

```
‚úÖ –û–ñ–ò–î–ê–ï–¢–°–Ø:
[0] Nest application successfully started

‚ùå –ù–ï –î–û–õ–ñ–ù–û –ë–´–¢–¨:
[0] error TS2353
[0] error TS2339
[0] Found 13 error(s)
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ 2: API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**

```
http://localhost:3001/api/slots/gate-of-olympus
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**

```json
{
  "id": "...",
  "slotThemes": [
    {
      "themes": {
        "name": "Mythology"
      }
    }
  ]
}
```

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –¢–µ–ø–µ—Ä—å –ø–æ–ª–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `slotThemes` (camelCase), –∞ –Ω–µ `slot_themes`!

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –ê–¥–º–∏–Ω–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç**

```
1. http://localhost:3000/admin/slots/gate-of-olympus
2. "–¢–µ–º–∞—Ç–∏–∫–∞ Hero —Å–µ–∫—Ü–∏–∏" ‚Üí "Show"
3. ‚úÖ –í—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–µ–º–∞—Ç–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
4. –í—ã–±–µ—Ä–∏ –¥–æ 5 —Ç–µ–º–∞—Ç–∏–∫ ‚Üí –°–æ—Ö—Ä–∞–Ω–∏
5. –û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Üí –í—Å–µ —Ç–µ–º–∞—Ç–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ 4: –ö–ª–∏–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–º–∞—Ç–∏–∫–∏**

```
1. http://localhost:3000/slots/gate-of-olympus
2. –û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+F5)
3. ‚úÖ –í Hero —Å–µ–∫—Ü–∏–∏ –≤—Å–µ —Ç–µ–º–∞—Ç–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
```

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–µ—Å–ª–∏ –æ—à–∏–±–∫–∏ –æ—Å—Ç–∞–ª–∏—Å—å):

### **–ü—Ä–æ–±–ª–µ–º–∞ 1: TypeScript –≤—Å—ë –µ—â—ë –≤—ã–¥–∞—ë—Ç –æ—à–∏–±–∫–∏**

**–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω Prisma –∫–ª–∏–µ–Ω—Ç:**

```bash
cd backend
npx prisma generate
```

**–ü—Ä–æ–≤–µ—Ä—å generated —Ç–∏–ø—ã:**

–û—Ç–∫—Ä–æ–π `backend/node_modules/@prisma/client/index.d.ts` –∏ –Ω–∞–π–¥–∏:

```typescript
export type slotsInclude = {
  // ...
  slotThemes?: boolean | slot_themesArgs; // ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å slotThemes, –∞ –Ω–µ slot_themes!
};
```

### **–ü—Ä–æ–±–ª–µ–º–∞ 2: Frontend –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç slotThemes**

**–ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:**

```javascript
fetch("http://localhost:3001/api/slots/gate-of-olympus")
  .then((r) => r.json())
  .then((slot) => {
    console.log("slotThemes:", slot.slotThemes); // ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å slotThemes
  });
```

–ï—Å–ª–∏ –≤ –æ—Ç–≤–µ—Ç–µ `slot_themes` (snake_case) –≤–º–µ—Å—Ç–æ `slotThemes` (camelCase) ‚Üí backend –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω.

### **–ü—Ä–æ–±–ª–µ–º–∞ 3: –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –æ—à–∏–±–∫–∏ –æ—Å—Ç–∞–ª–∏—Å—å**

**–ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞:**

```powershell
cd backend
Remove-Item -Recurse -Force node_modules,dist
npm install
npx prisma generate
cd ..
npm run dev
```

---

## üìã –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫:

- [x] –°—Ö–µ–º–∞ Prisma –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (–ø–æ–ª—è –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã –≤ camelCase)
- [x] –Ø–≤–Ω—ã–µ –∏–º–µ–Ω–∞ —Å–≤—è–∑–µ–π –¥–æ–±–∞–≤–ª–µ–Ω—ã (`@relation("SlotToThemes")`)
- [x] Prisma –∫–ª–∏–µ–Ω—Ç —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
- [x] Backend –∫–æ–¥ –æ–±–Ω–æ–≤–ª—ë–Ω (`slots.service.ts`, `slots-prisma.service.ts`, `themes.service.ts`)
- [x] Frontend –∞–¥–º–∏–Ω–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (`admin/slots/[id].vue`)
- [x] Frontend –∫–ª–∏–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—ë–Ω (`slots/[slug].vue`)
- [ ] Backend –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –ë–ï–ó –æ—à–∏–±–æ–∫ TypeScript
- [ ] API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `slotThemes` (camelCase)
- [ ] –ê–¥–º–∏–Ω–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–º–∞—Ç–∏–∫–∏
- [ ] –ö–ª–∏–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–º–∞—Ç–∏–∫–∏

---

## üéØ –ò—Ç–æ–≥:

### ‚úÖ **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º—ë–Ω –≤ —Å—Ö–µ–º–µ Prisma –∏—Å–ø—Ä–∞–≤–ª–µ–Ω**

### ‚úÖ **–ü–æ–ª—è –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã –≤ camelCase (`slotThemes`)**

### ‚úÖ **–Ø–≤–Ω—ã–µ –∏–º–µ–Ω–∞ —Å–≤—è–∑–µ–π –¥–æ–±–∞–≤–ª–µ–Ω—ã**

### ‚úÖ **–í–°–ï backend –∏ frontend —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã**

### ‚úÖ **TypeScript –≤–∏–¥–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã**

### ‚úÖ **–í–°–ï 13 –æ—à–∏–±–æ–∫ –î–û–õ–ñ–ù–´ –±—ã—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã**

---

## üìö –ü–æ–ª–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ—à–µ–Ω–∏–π:

1. **–ú–ù–û–ñ–ï–°–¢–í–ï–ù–ù–´–ï_–¢–ï–ú–ê–¢–ò–ö–ò.md** - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–µ–º–∞—Ç–∏–∫
2. **–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï*API*–î–õ–Ø_–ê–î–ú–ò–ù–ö–ò.md** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API –º–µ—Ç–æ–¥–æ–≤
3. **–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï*20*–û–®–ò–ë–û–ö.md** - –ü–µ—Ä–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (themes.service.ts)
4. **–§–ò–ù–ê–õ–¨–ù–û–ï*–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï*–û–®–ò–ë–û–ö.md** - –ü–æ–ø—ã—Ç–∫–∞ —Å @prisma –∏ dist
5. **–†–ê–î–ò–ö–ê–õ–¨–ù–û–ï*–†–ï–®–ï–ù–ò–ï_13*–û–®–ò–ë–û–ö.md** - –£–¥–∞–ª–µ–Ω–∏–µ node_modules
6. **–§–ò–ù–ê–õ–¨–ù–û–ï*–†–ï–®–ï–ù–ò–ï*–ö–û–ù–§–õ–ò–ö–¢_–ò–ú–Å–ù.md** ‚Üê **–í–´ –ó–î–ï–°–¨ (–∏—Å—Ç–∏–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)**

---

## üí° –£—Ä–æ–∫ –Ω–∞ –±—É–¥—É—â–µ–µ:

### **–í Prisma –ò–ó–ë–ï–ì–ê–ô–¢–ï –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∏–º—ë–Ω –¥–ª—è –º–æ–¥–µ–ª–∏ –∏ –ø–æ–ª—è!**

‚ùå **–ù–ï –î–ï–õ–ê–¢–¨:**

```prisma
model user_roles {
  // ...
}

model users {
  user_roles user_roles[]  // ‚Üê –ö–æ–Ω—Ñ–ª–∏–∫—Ç!
}
```

‚úÖ **–î–ï–õ–ê–¢–¨:**

```prisma
model user_roles {
  // ...
}

model users {
  userRoles user_roles[]  // ‚Üê camelCase, –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞
  // –∏–ª–∏
  roles user_roles[]      // ‚Üê –î—Ä—É–≥–æ–µ –∏–º—è
}
```

---

**–ì–æ—Ç–æ–≤–æ!** üöÄ‚ú®

**Backend –î–û–õ–ñ–ï–ù –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫!**

–ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
[0] Nest application successfully started ‚úÖ
```

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∏ –æ—Å—Ç–∞–ª–∏—Å—å** - –Ω–∞–ø–∏—à–∏, –ø–æ—Å–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ –Ω–∞–π–¥—ë–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã!
