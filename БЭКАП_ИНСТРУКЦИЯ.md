# ‚ö° –ú–û–õ–ù–ò–ï–ù–û–°–ù–û–ï –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –ë–ê–ó–´ –î–ê–ù–ù–´–•

## üéØ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø (‚ö° 1 —Å–µ–∫—É–Ω–¥–∞):

```bash
cd backend
npm run db:backup
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞ (‚ö° 2 —Å–µ–∫—É–Ω–¥—ã):

```bash
cd backend
npm run db:restore
```

**–í–°–Å! –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –º–≥–Ω–æ–≤–µ–Ω–Ω–æ!**

---

## üìã –í–°–ï –ö–û–ú–ê–ù–î–´

### 1Ô∏è‚É£ –ë—ã—Å—Ç—Ä—ã–π –±—ç–∫–∞–ø (–∫–æ–ø–∏—è .db —Ñ–∞–π–ª–∞)

```bash
cd backend
npm run db:backup
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- ‚úÖ –ö–æ–ø–∏—Ä—É–µ—Ç `dev.db` –≤ `backups/db/dev_backup_–î–ê–¢–ê.db`
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∫–æ–ø–∏—é `dev_backup_LATEST.db`
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5 –±—ç–∫–∞–ø–æ–≤
- ‚ö° –í—Ä–µ–º—è: **~1 —Å–µ–∫—É–Ω–¥–∞**

### 2Ô∏è‚É£ –ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
cd backend
npm run db:restore
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏–∑ `dev_backup_LATEST.db`
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—É—â—É—é –ë–î –≤ `dev_before_restore.db` (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
- ‚úÖ –°–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- ‚ö° –í—Ä–µ–º—è: **~2 —Å–µ–∫—É–Ω–¥—ã**

### 3Ô∏è‚É£ –ü–æ–ª–Ω—ã–π –∞–≤—Ç–æ–±—ç–∫–∞–ø (–ë–î + JSON)

```bash
cd backend
npm run db:auto-backup
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- ‚úÖ –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ JSON (`studio-data/`)
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª —Å —Å–≤–æ–¥–∫–æ–π `backup-summary.json`
- ‚ö° –í—Ä–µ–º—è: **~5 —Å–µ–∫—É–Ω–¥**

### 4Ô∏è‚É£ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ JSON

```bash
cd backend
npm run db:restore-json
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ü–æ–ª–µ–∑–Ω–æ –µ—Å–ª–∏ .db —Ñ–∞–π–ª –ø–æ–≤—Ä–µ–∂–¥–µ–Ω
- ‚ö° –í—Ä–µ–º—è: **~10 —Å–µ–∫—É–Ω–¥**

### 5Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
cd backend
npm run db:check
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü–µ
- ‚ö° –í—Ä–µ–º—è: **~1 —Å–µ–∫—É–Ω–¥–∞**

---

## üî• –¢–ò–ü–ò–ß–ù–´–ï –°–¶–ï–ù–ê–†–ò–ò

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–µ–¥ –≤–Ω–µ—Å–µ–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
cd backend
npm run db:backup
# –í–Ω–æ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è...
# –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å:
npm run db:restore
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±—ç–∫–∞–ø

```bash
cd backend
npm run db:auto-backup
git add studio-data/
git commit -m "Daily backup"
git push
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ –∞–¥–º–∏–Ω–∫–µ

```bash
# –î–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—ã–µ —Å–ª–æ—Ç—ã, –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏ —Ç.–¥.
cd backend
npm run db:auto-backup
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ë–∞–∑–∞ "–æ–±–Ω—É–ª–∏–ª–∞—Å—å"

```bash
cd backend
npm run db:restore
# –ì–æ—Ç–æ–≤–æ! –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!
```

---

## üì¶ –ß–¢–û –°–û–•–†–ê–ù–Ø–ï–¢–°–Ø

### –ë—ç–∫–∞–ø—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (.db —Ñ–∞–π–ª—ã)

üìÅ **–ü–∞–ø–∫–∞:** `backups/db/`

- `dev_backup_YYYY-MM-DDTHH-MM-SS.db` - –±—ç–∫–∞–ø—ã —Å –º–µ—Ç–∫–æ–π –≤—Ä–µ–º–µ–Ω–∏
- `dev_backup_LATEST.db` - –≤—Å–µ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è
- `dev_before_restore.db` - –∫–æ–ø–∏—è –ø–µ—Ä–µ–¥ –ø–æ—Å–ª–µ–¥–Ω–∏–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º

### JSON —ç–∫—Å–ø–æ—Ä—Ç—ã

üìÅ **–ü–∞–ø–∫–∞:** `backend/studio-data/`

- `providers.json` - –≤—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- `mechanics.json` - –≤—Å–µ –º–µ—Ö–∞–Ω–∏–∫–∏
- `themes.json` - –≤—Å–µ —Ç–µ–º—ã
- `slot_categories.json` - –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `slots.json` - –≤—Å–µ —Å–ª–æ—Ç—ã
- `backup-summary.json` - —Å–≤–æ–¥–∫–∞ –æ –±—ç–∫–∞–ø–µ

---

## üöÄ –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–Ø

### –î–æ–±–∞–≤–∏—Ç—å –≤ pre-commit hook

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.git/hooks/pre-commit`:

```bash
#!/bin/sh
cd backend && npm run db:backup
```

–¢–µ–ø–µ—Ä—å –±—ç–∫–∞–ø –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º!

### –î–æ–±–∞–≤–∏—Ç—å –≤ npm scripts –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

–í `package.json` –≤ –∫–æ—Ä–Ω–µ:

```json
{
  "scripts": {
    "backup": "cd backend && npm run db:auto-backup",
    "restore": "cd backend && npm run db:restore"
  }
}
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏–∑ –∫–æ—Ä–Ω—è:

```bash
npm run backup
npm run restore
```

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

1. **–ë—ç–∫–∞–ø—ã .db –ù–ï –∫–æ–º–º–∏—Ç—è—Ç—Å—è –≤ Git** (.gitignore)

   - –ù–æ JSON —Ñ–∞–π–ª—ã –≤ `studio-data/` –∫–æ–º–º–∏—Ç—è—Ç—Å—è! ‚úÖ

2. **–ü–µ—Ä–µ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ backend**

   - SQLite –Ω–µ –ª—é–±–∏—Ç, –∫–æ–≥–¥–∞ —Ñ–∞–π–ª –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

3. **JSON –±—ç–∫–∞–ø—ã –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ Git**

   - –û–Ω–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ, –ª–µ–≥–∫–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –†–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –ª—é–±–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ

4. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
   - –î–µ–ª–∞–π—Ç–µ `npm run db:auto-backup` –ø–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
   - –ö–æ–º–º–∏—Ç—å—Ç–µ `studio-data/` –≤ Git –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

---

## üéì –ú–ï–¢–ê–§–û–†–ê –î–õ–Ø –ü–û–ù–ò–ú–ê–ù–ò–Ø

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤–∞—à–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî —ç—Ç–æ **—Å–µ–π—Ñ —Å —Ü–µ–Ω–Ω—ã–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏**:

- **`npm run db:backup`** = –ë—ã—Å—Ç—Ä–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å–µ–π—Ñ–∞ (1 —Å–µ–∫)
- **`npm run db:auto-backup`** = –ü–æ–ª–Ω–∞—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è —Å –æ–ø–∏—Å—å—é (5 —Å–µ–∫)
- **`npm run db:restore`** = –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (2 —Å–µ–∫)

–ï—Å–ª–∏ –∑–∞–≤—Ç—Ä–∞ –∫—Ç–æ-—Ç–æ —Å–ª—É—á–∞–π–Ω–æ –≤—ã–Ω–µ—Å –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ —Å–µ–π—Ñ–∞ (–æ–±–Ω—É–ª–∏–ª –ë–î), –≤—ã –∑–∞ 2 —Å–µ–∫—É–Ω–¥—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å—ë –∫–∞–∫ –±—ã–ª–æ!

---

## üìä –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï

–ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —É –≤–∞—Å –µ—Å—Ç—å:

- ‚úÖ **94 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞**
- ‚úÖ **6 –º–µ—Ö–∞–Ω–∏–∫**
- ‚úÖ **241 —Ç–µ–º–∞**
- ‚úÖ **31 –∫–∞—Ç–µ–≥–æ—Ä–∏—è**
- ‚úÖ **5 —Å–ª–æ—Ç–æ–≤**

–í—Å–µ —ç—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤:

- `backups/db/dev_backup_LATEST.db`
- `backend/studio-data/*.json`

---

## üí° –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô WORKFLOW

```bash
# 1. –£—Ç—Ä–æ–º –ø–µ—Ä–µ–¥ —Ä–∞–±–æ—Ç–æ–π
cd backend && npm run db:check

# 2. –ü–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
npm run db:backup

# 3. –í –∫–æ–Ω—Ü–µ –¥–Ω—è
npm run db:auto-backup
git add studio-data/
git commit -m "Daily work backup"
git push

# 4. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å
npm run db:restore
```

---

‚ú® **–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –º–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö!** ‚ú®


