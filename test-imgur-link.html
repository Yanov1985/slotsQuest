<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Å—ã–ª–∫–∏ Imgur</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 800px;
      width: 100%;
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
      font-size: 28px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .input-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      color: #555;
      font-weight: 600;
      font-size: 14px;
    }

    input[type="text"] {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 14px;
      transition: all 0.3s;
    }

    input[type="text"]:focus {
      outline: none;
      border-color: #667eea;
    }

    .buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
    }

    button {
      flex: 1;
      padding: 14px 24px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-check {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .btn-check:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
    }

    .btn-fix {
      background: #f59e0b;
      color: white;
    }

    .btn-fix:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(245, 158, 11, 0.4);
    }

    .result {
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      display: none;
    }

    .result.success {
      background: #d1fae5;
      border: 2px solid #10b981;
      display: block;
    }

    .result.error {
      background: #fee2e2;
      border: 2px solid #ef4444;
      display: block;
    }

    .result.info {
      background: #dbeafe;
      border: 2px solid #3b82f6;
      display: block;
    }

    .result-title {
      font-weight: 700;
      margin-bottom: 10px;
      font-size: 16px;
    }

    .result.success .result-title {
      color: #059669;
    }

    .result.error .result-title {
      color: #dc2626;
    }

    .result.info .result-title {
      color: #2563eb;
    }

    .result-text {
      font-size: 14px;
      line-height: 1.6;
      color: #374151;
    }

    .preview {
      text-align: center;
      margin-top: 20px;
      display: none;
    }

    .preview.show {
      display: block;
    }

    .preview img {
      max-width: 100%;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .loader {
      display: none;
      text-align: center;
      padding: 40px;
    }

    .loader.show {
      display: block;
    }

    .spinner {
      border: 4px solid #f3f4f6;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    code {
      background: #f3f4f6;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Å—ã–ª–∫–∏ Imgur</h1>
    <p class="subtitle">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤–∞—à–µ–π —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</p>

    <div class="input-group">
      <label for="imageUrl">–í—Å—Ç–∞–≤—å—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</label>
      <input
        type="text"
        id="imageUrl"
        placeholder="https://imgur.com/a/KxoieHw"
        value="https://imgur.com/a/KxoieHw"
      >
    </div>

    <div class="buttons">
      <button class="btn-check" onclick="checkImage()">‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
      <button class="btn-fix" onclick="fixUrl()">üõ†Ô∏è –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
    </div>

    <div id="result" class="result"></div>

    <div id="loader" class="loader">
      <div class="spinner"></div>
      <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è...</p>
    </div>

    <div id="preview" class="preview"></div>
  </div>

  <script>
    function checkImage() {
      const url = document.getElementById('imageUrl').value.trim();
      const resultDiv = document.getElementById('result');
      const previewDiv = document.getElementById('preview');
      const loaderDiv = document.getElementById('loader');

      // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
      resultDiv.className = 'result';
      resultDiv.innerHTML = '';
      previewDiv.className = 'preview';
      previewDiv.innerHTML = '';
      loaderDiv.className = 'loader';

      if (!url) {
        resultDiv.className = 'result error';
        resultDiv.innerHTML = `
          <div class="result-title">‚ùå –û—à–∏–±–∫–∞</div>
          <div class="result-text">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.</div>
        `;
        return;
      }

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ —Å—Å—ã–ª–∫–∏
      if (url.includes('/a/')) {
        resultDiv.className = 'result error';
        resultDiv.innerHTML = `
          <div class="result-title">‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å—Å—ã–ª–∫–∏</div>
          <div class="result-text">
            –≠—Ç–∞ —Å—Å—ã–ª–∫–∞ –≤–µ–¥—ë—Ç –Ω–∞ <strong>–∞–ª—å–±–æ–º Imgur</strong>, –∞ –Ω–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ!<br><br>
            <strong>–í–∞—à–∞ —Å—Å—ã–ª–∫–∞:</strong><br>
            <code>${url}</code><br><br>
            –ù–∞–∂–º–∏—Ç–µ <strong>"üõ†Ô∏è –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"</strong>, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç.
          </div>
        `;
        return;
      }

      if (!url.startsWith('https://i.imgur.com/')) {
        resultDiv.className = 'result error';
        resultDiv.innerHTML = `
          <div class="result-title">‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–∞ –æ—à–∏–±–∫–∞</div>
          <div class="result-text">
            –°—Å—ã–ª–∫–∞ –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å <code>https://i.imgur.com/</code><br><br>
            <strong>–í–∞—à–∞ —Å—Å—ã–ª–∫–∞:</strong><br>
            <code>${url}</code><br><br>
            –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–∂–∞—Ç—å <strong>"üõ†Ô∏è –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É"</strong>.
          </div>
        `;
      }

      // –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
      loaderDiv.className = 'loader show';

      const img = new Image();

      img.onload = function() {
        loaderDiv.className = 'loader';
        resultDiv.className = 'result success';
        resultDiv.innerHTML = `
          <div class="result-title">‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!</div>
          <div class="result-text">
            <strong>–†–∞–∑–º–µ—Ä:</strong> ${img.width} √ó ${img.height} px<br>
            <strong>URL:</strong> <code>${url}</code><br><br>
            –≠—Ç–∞ —Å—Å—ã–ª–∫–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ!
          </div>
        `;

        previewDiv.className = 'preview show';
        previewDiv.innerHTML = `<img src="${url}" alt="Preview">`;
      };

      img.onerror = function() {
        loaderDiv.className = 'loader';
        resultDiv.className = 'result error';
        resultDiv.innerHTML = `
          <div class="result-title">‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</div>
          <div class="result-text">
            <strong>–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:</strong><br>
            ‚Ä¢ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL (—ç—Ç–æ –Ω–µ –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)<br>
            ‚Ä¢ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ<br>
            ‚Ä¢ –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ Imgur<br><br>
            <strong>–í–∞—à–∞ —Å—Å—ã–ª–∫–∞:</strong><br>
            <code>${url}</code><br><br>
            <strong>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:</strong><br>
            <code>https://i.imgur.com/[ID].jpg</code>
          </div>
        `;
      };

      img.src = url;
    }

    function fixUrl() {
      const url = document.getElementById('imageUrl').value.trim();
      const resultDiv = document.getElementById('result');

      if (!url) {
        resultDiv.className = 'result error';
        resultDiv.innerHTML = `
          <div class="result-title">‚ùå –û—à–∏–±–∫–∞</div>
          <div class="result-text">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.</div>
        `;
        return;
      }

      let fixedUrl = url;
      let suggestions = [];

      // –ò–∑–≤–ª–µ–∫–∞–µ–º ID –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ Imgur
      let imgurId = '';

      // –§–æ—Ä–º–∞—Ç: https://imgur.com/a/KxoieHw
      if (url.includes('/a/')) {
        imgurId = url.split('/a/')[1].split('?')[0].split('#')[0];
      }
      // –§–æ—Ä–º–∞—Ç: https://imgur.com/KxoieHw
      else if (url.includes('imgur.com/') && !url.includes('i.imgur.com')) {
        imgurId = url.split('imgur.com/')[1].split('?')[0].split('#')[0].split('.')[0];
      }
      // –§–æ—Ä–º–∞—Ç: https://i.imgur.com/KxoieHw (—É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π)
      else if (url.includes('i.imgur.com/')) {
        imgurId = url.split('i.imgur.com/')[1].split('?')[0].split('#')[0].split('.')[0];
      }

      if (imgurId) {
        suggestions = [
          `https://i.imgur.com/${imgurId}.jpg`,
          `https://i.imgur.com/${imgurId}.png`,
          `https://i.imgur.com/${imgurId}.webp`,
          `https://i.imgur.com/${imgurId}`
        ];

        resultDiv.className = 'result info';
        resultDiv.innerHTML = `
          <div class="result-title">üí° –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å—Å—ã–ª–æ–∫</div>
          <div class="result-text">
            –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —ç—Ç–∏ —Å—Å—ã–ª–∫–∏ (–Ω–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å):<br><br>
            ${suggestions.map((s, i) =>
              `<div style="margin-bottom: 8px;">
                <strong>${i + 1}.</strong>
                <code style="cursor: pointer;" onclick="copyToClipboard('${s}', this)">${s}</code>
              </div>`
            ).join('')}
            <br>
            <small>–ü–æ—Å–ª–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –≤ –ø–æ–ª–µ –≤—ã—à–µ –∏ –Ω–∞–∂–º–∏—Ç–µ "‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å"</small>
          </div>
        `;

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –ø–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
        document.getElementById('imageUrl').value = suggestions[0];
      } else {
        resultDiv.className = 'result error';
        resultDiv.innerHTML = `
          <div class="result-title">‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Å—Å—ã–ª–∫—É</div>
          <div class="result-text">
            –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç—Ç–æ —Å—Å—ã–ª–∫–∞ —Å Imgur.<br><br>
            <strong>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:</strong><br>
            ‚Ä¢ <code>https://imgur.com/a/[ID]</code> (–∞–ª—å–±–æ–º)<br>
            ‚Ä¢ <code>https://imgur.com/[ID]</code> (–ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞)<br>
            ‚Ä¢ <code>https://i.imgur.com/[ID].jpg</code> (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
          </div>
        `;
      }
    }

    function copyToClipboard(text, element) {
      navigator.clipboard.writeText(text).then(() => {
        const original = element.innerHTML;
        element.innerHTML = text + ' ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
        element.style.background = '#10b981';
        element.style.color = 'white';

        setTimeout(() => {
          element.innerHTML = original;
          element.style.background = '#f3f4f6';
          element.style.color = '#374151';
        }, 2000);
      });
    }
  </script>
</body>
</html>
